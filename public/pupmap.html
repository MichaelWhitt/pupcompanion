<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="https://api.tomtom.com/maps-sdk-for-web/cdn/plugins/SearchBox/3.1.3-public-preview.0/SearchBox.css"/>
        <link rel="stylesheet" type="text/css" href="https://api.tomtom.com/maps-sdk-for-web/cdn/6.x/6.15.0/maps/maps.css"/>
        <script src="https://api.tomtom.com/maps-sdk-for-web/cdn/6.x/6.1.2-public-preview.15/services/services-web.min.js"></script>
    <script src="https://api.tomtom.com/maps-sdk-for-web/cdn/plugins/SearchBox/3.1.3-public-preview.0/SearchBox-web.js"></script>
    <script src="https://api.tomtom.com/maps-sdk-for-web/cdn/6.x/6.15.0/services/services-web.min.js"></script>    
</head>
    <body>
        <input type="text" id="query" value="">
        <button onclick="search()">SEARCH</button>
        <div style="width: 800px; height: 800px;" id="mapContainer" class="mapContainer"></div>

        <script src="https://api.tomtom.com/maps-sdk-for-web/cdn/6.x/6.15.0/maps/maps-web.min.js"></script>
        <script>
            
            var APIKEY = "OTesSbZQ5Tvq0TUHV8gKbv2ecpFPAaz2";
            var Dallas = [-96.79621, 32.77798];
            tt.setProductInfo('<your-product-name>', '<your-product-version>');
            var map = tt.map({
                key: APIKEY,
                container: "mapContainer", 
                center: Dallas,
                zoom: 14
                
            });
        var moveMap = function(lnglat){
            map.flyTo({
                center: lnglat,
                zoom: 14
            })
        }

        var handleResults = function(result){
            console.log(result);
            console.log(result.results);
            console.log(result.results.length);
            result.results.map(r => console.log(r.poi.name + r.poi.phone + r.poi.url))
            if (result){
                for (let x = 0; x < result.results.length; x++){
                    var marker = new tt.Marker()
                    .setLngLat(result.results[x].position)
                    .addTo(map);
                    var newDiv = document.createElement("div");
                    newDiv.innerHTML = `${x + 1}: ${result.results[x].poi.name}`
                    document.body.append(newDiv);
                } 
            }
        }

        var search = function(){
            tt.services.fuzzySearch({
                key: APIKEY,
                query: document.getElementById("query").value,
                boundingBox: map.getBounds()
            }).then(handleResults)
        }    
        </script>

    </body>
</html>